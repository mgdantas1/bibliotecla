{% extends 'base.html'   %}

{% block title %}
    Empréstimos
{% endblock %}

{% block title_page %}
    Empréstimos
{% endblock %}

{% block content %}
    {% if emprestimos %}
        <div class="table">
            <table>
                <thead>
                    <th>Livro</th>
                    <th>Data do Empréstimo</th>
                    <th>Data do prazo</th>
                    <th>Data da devolução</th>
                    <th>Status</th>
                    <th colspan="3">Ações</th>
                </thead>
                <tbody>
                    {% for dado in emprestimos %}
                        <tr>
                            <td>{{dado.livro.titulo}}</td>
                            <td>{{ dado.data_emprestimo.strftime('%d/%m/%Y') }}</td>
                            <td>{{ dado.data_prazo.strftime('%d/%m/%Y') }}</td>
                            <td>{{ dado.data_devolucao.strftime('%d/%m/%Y') if dado.data_devolucao else 'Ainda não devolvido' }}</td>
                            <td>{{dado.status}}</td>
                            {% if dado.status != 'Devolvido' %}
                                <td><button><a href="{{ url_for('emprestimo.devolver_livro', emprestimo_id = dado.id) }}">Devolver</a></button></td>
                                <td><button><a href="{{ url_for('emprestimo.editar_emprestimo', emprestimo_id=dado.id) }}">Editar</a></button></td>
                            {% endif %}
                            {% if dado.status == 'Devolvido' %}
                                <td><button><a href="{{ url_for('emprestimo.deletar_emprestimo', emprestimo_id=dado.id) }}">Excluir</a></button></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
{% endblock %}